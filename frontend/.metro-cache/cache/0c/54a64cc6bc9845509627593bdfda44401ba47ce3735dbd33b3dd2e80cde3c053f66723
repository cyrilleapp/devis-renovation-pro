{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":70,"column":0,"index":2189}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"zustand","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"xFAZpEovr+Y5/UCynUzO0ntFekY="}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":69,"index":103}}],"key":"6eZFbfKht0uO2NEVT/d8+i8B0s8="}},{"name":"../services/authService","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":64,"index":168}}],"key":"Em12uMzCUFWx6it1v5SDKP0I1T8="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useAuthStore = void 0;\n  var _zustand = require(_dependencyMap[1], \"zustand\");\n  var _asyncStorage = _interopRequireDefault(require(_dependencyMap[2], \"@react-native-async-storage/async-storage\"));\n  var _authService = require(_dependencyMap[3], \"../services/authService\");\n  const useAuthStore = exports.useAuthStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    token: null,\n    isLoading: true,\n    isAuthenticated: false,\n    redirectAfterLogin: null,\n    setRedirectAfterLogin: path => {\n      set({\n        redirectAfterLogin: path\n      });\n    },\n    login: async (email, password) => {\n      try {\n        const response = await _authService.authService.login(email, password);\n        await _asyncStorage.default.setItem('auth_token', response.access_token);\n        set({\n          user: response.user,\n          token: response.access_token,\n          isAuthenticated: true\n        });\n      } catch (error) {\n        throw error;\n      }\n    },\n    register: async (email, password, nom) => {\n      try {\n        const response = await _authService.authService.register(email, password, nom);\n        await _asyncStorage.default.setItem('auth_token', response.access_token);\n        set({\n          user: response.user,\n          token: response.access_token,\n          isAuthenticated: true\n        });\n      } catch (error) {\n        throw error;\n      }\n    },\n    logout: async () => {\n      await _asyncStorage.default.removeItem('auth_token');\n      set({\n        user: null,\n        token: null,\n        isAuthenticated: false,\n        redirectAfterLogin: null\n      });\n    },\n    loadToken: async () => {\n      try {\n        const token = await _asyncStorage.default.getItem('auth_token');\n        if (token) {\n          global.authToken = token;\n          const user = await _authService.authService.getCurrentUser();\n          set({\n            user,\n            token,\n            isAuthenticated: true,\n            isLoading: false\n          });\n        } else {\n          set({\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        console.error('Error loading token:', error);\n        set({\n          isLoading: false\n        });\n      }\n    }\n  }));\n});","lineCount":81,"map":[[7,2,1,0],[7,6,1,0,"_zustand"],[7,14,1,0],[7,17,1,0,"require"],[7,24,1,0],[7,25,1,0,"_dependencyMap"],[7,39,1,0],[8,2,2,0],[8,6,2,0,"_asyncStorage"],[8,19,2,0],[8,22,2,0,"_interopRequireDefault"],[8,44,2,0],[8,45,2,0,"require"],[8,52,2,0],[8,53,2,0,"_dependencyMap"],[8,67,2,0],[9,2,3,0],[9,6,3,0,"_authService"],[9,18,3,0],[9,21,3,0,"require"],[9,28,3,0],[9,29,3,0,"_dependencyMap"],[9,43,3,0],[10,2,18,7],[10,8,18,13,"useAuthStore"],[10,20,18,25],[10,23,18,25,"exports"],[10,30,18,25],[10,31,18,25,"useAuthStore"],[10,43,18,25],[10,46,18,28],[10,50,18,28,"create"],[10,65,18,34],[10,67,18,46],[10,68,18,47,"set"],[10,71,18,50],[10,73,18,52,"get"],[10,76,18,55],[10,82,18,61],[11,4,19,2,"user"],[11,8,19,6],[11,10,19,8],[11,14,19,12],[12,4,20,2,"token"],[12,9,20,7],[12,11,20,9],[12,15,20,13],[13,4,21,2,"isLoading"],[13,13,21,11],[13,15,21,13],[13,19,21,17],[14,4,22,2,"isAuthenticated"],[14,19,22,17],[14,21,22,19],[14,26,22,24],[15,4,23,2,"redirectAfterLogin"],[15,22,23,20],[15,24,23,22],[15,28,23,26],[16,4,25,2,"setRedirectAfterLogin"],[16,25,25,23],[16,27,25,26,"path"],[16,31,25,45],[16,35,25,50],[17,6,26,4,"set"],[17,9,26,7],[17,10,26,8],[18,8,26,10,"redirectAfterLogin"],[18,26,26,28],[18,28,26,30,"path"],[19,6,26,35],[19,7,26,36],[19,8,26,37],[20,4,27,2],[20,5,27,3],[21,4,29,2,"login"],[21,9,29,7],[21,11,29,9],[21,17,29,9,"login"],[21,18,29,16,"email"],[21,23,29,29],[21,25,29,31,"password"],[21,33,29,47],[21,38,29,52],[22,6,30,4],[22,10,30,8],[23,8,31,6],[23,14,31,12,"response"],[23,22,31,20],[23,25,31,23],[23,31,31,29,"authService"],[23,55,31,40],[23,56,31,41,"login"],[23,61,31,46],[23,62,31,47,"email"],[23,67,31,52],[23,69,31,54,"password"],[23,77,31,62],[23,78,31,63],[24,8,32,6],[24,14,32,12,"AsyncStorage"],[24,35,32,24],[24,36,32,25,"setItem"],[24,43,32,32],[24,44,32,33],[24,56,32,45],[24,58,32,47,"response"],[24,66,32,55],[24,67,32,56,"access_token"],[24,79,32,68],[24,80,32,69],[25,8,33,6,"set"],[25,11,33,9],[25,12,33,10],[26,10,33,12,"user"],[26,14,33,16],[26,16,33,18,"response"],[26,24,33,26],[26,25,33,27,"user"],[26,29,33,31],[27,10,33,33,"token"],[27,15,33,38],[27,17,33,40,"response"],[27,25,33,48],[27,26,33,49,"access_token"],[27,38,33,61],[28,10,33,63,"isAuthenticated"],[28,25,33,78],[28,27,33,80],[29,8,33,85],[29,9,33,86],[29,10,33,87],[30,6,34,4],[30,7,34,5],[30,8,34,6],[30,15,34,13,"error"],[30,20,34,18],[30,22,34,20],[31,8,35,6],[31,14,35,12,"error"],[31,19,35,17],[32,6,36,4],[33,4,37,2],[33,5,37,3],[34,4,39,2,"register"],[34,12,39,10],[34,14,39,12],[34,20,39,12,"register"],[34,21,39,19,"email"],[34,26,39,32],[34,28,39,34,"password"],[34,36,39,50],[34,38,39,52,"nom"],[34,41,39,63],[34,46,39,68],[35,6,40,4],[35,10,40,8],[36,8,41,6],[36,14,41,12,"response"],[36,22,41,20],[36,25,41,23],[36,31,41,29,"authService"],[36,55,41,40],[36,56,41,41,"register"],[36,64,41,49],[36,65,41,50,"email"],[36,70,41,55],[36,72,41,57,"password"],[36,80,41,65],[36,82,41,67,"nom"],[36,85,41,70],[36,86,41,71],[37,8,42,6],[37,14,42,12,"AsyncStorage"],[37,35,42,24],[37,36,42,25,"setItem"],[37,43,42,32],[37,44,42,33],[37,56,42,45],[37,58,42,47,"response"],[37,66,42,55],[37,67,42,56,"access_token"],[37,79,42,68],[37,80,42,69],[38,8,43,6,"set"],[38,11,43,9],[38,12,43,10],[39,10,43,12,"user"],[39,14,43,16],[39,16,43,18,"response"],[39,24,43,26],[39,25,43,27,"user"],[39,29,43,31],[40,10,43,33,"token"],[40,15,43,38],[40,17,43,40,"response"],[40,25,43,48],[40,26,43,49,"access_token"],[40,38,43,61],[41,10,43,63,"isAuthenticated"],[41,25,43,78],[41,27,43,80],[42,8,43,85],[42,9,43,86],[42,10,43,87],[43,6,44,4],[43,7,44,5],[43,8,44,6],[43,15,44,13,"error"],[43,20,44,18],[43,22,44,20],[44,8,45,6],[44,14,45,12,"error"],[44,19,45,17],[45,6,46,4],[46,4,47,2],[46,5,47,3],[47,4,49,2,"logout"],[47,10,49,8],[47,12,49,10],[47,18,49,10,"logout"],[47,19,49,10],[47,24,49,22],[48,6,50,4],[48,12,50,10,"AsyncStorage"],[48,33,50,22],[48,34,50,23,"removeItem"],[48,44,50,33],[48,45,50,34],[48,57,50,46],[48,58,50,47],[49,6,51,4,"set"],[49,9,51,7],[49,10,51,8],[50,8,51,10,"user"],[50,12,51,14],[50,14,51,16],[50,18,51,20],[51,8,51,22,"token"],[51,13,51,27],[51,15,51,29],[51,19,51,33],[52,8,51,35,"isAuthenticated"],[52,23,51,50],[52,25,51,52],[52,30,51,57],[53,8,51,59,"redirectAfterLogin"],[53,26,51,77],[53,28,51,79],[54,6,51,84],[54,7,51,85],[54,8,51,86],[55,4,52,2],[55,5,52,3],[56,4,54,2,"loadToken"],[56,13,54,11],[56,15,54,13],[56,21,54,13,"loadToken"],[56,22,54,13],[56,27,54,25],[57,6,55,4],[57,10,55,8],[58,8,56,6],[58,14,56,12,"token"],[58,19,56,17],[58,22,56,20],[58,28,56,26,"AsyncStorage"],[58,49,56,38],[58,50,56,39,"getItem"],[58,57,56,46],[58,58,56,47],[58,70,56,59],[58,71,56,60],[59,8,57,6],[59,12,57,10,"token"],[59,17,57,15],[59,19,57,17],[60,10,58,8,"global"],[60,16,58,14],[60,17,58,15,"authToken"],[60,26,58,24],[60,29,58,27,"token"],[60,34,58,32],[61,10,59,8],[61,16,59,14,"user"],[61,20,59,18],[61,23,59,21],[61,29,59,27,"authService"],[61,53,59,38],[61,54,59,39,"getCurrentUser"],[61,68,59,53],[61,69,59,54],[61,70,59,55],[62,10,60,8,"set"],[62,13,60,11],[62,14,60,12],[63,12,60,14,"user"],[63,16,60,18],[64,12,60,20,"token"],[64,17,60,25],[65,12,60,27,"isAuthenticated"],[65,27,60,42],[65,29,60,44],[65,33,60,48],[66,12,60,50,"isLoading"],[66,21,60,59],[66,23,60,61],[67,10,60,67],[67,11,60,68],[67,12,60,69],[68,8,61,6],[68,9,61,7],[68,15,61,13],[69,10,62,8,"set"],[69,13,62,11],[69,14,62,12],[70,12,62,14,"isLoading"],[70,21,62,23],[70,23,62,25],[71,10,62,31],[71,11,62,32],[71,12,62,33],[72,8,63,6],[73,6,64,4],[73,7,64,5],[73,8,64,6],[73,15,64,13,"error"],[73,20,64,18],[73,22,64,20],[74,8,65,6,"console"],[74,15,65,13],[74,16,65,14,"error"],[74,21,65,19],[74,22,65,20],[74,44,65,42],[74,46,65,44,"error"],[74,51,65,49],[74,52,65,50],[75,8,66,6,"set"],[75,11,66,9],[75,12,66,10],[76,10,66,12,"isLoading"],[76,19,66,21],[76,21,66,23],[77,8,66,29],[77,9,66,30],[77,10,66,31],[78,6,67,4],[79,4,68,2],[80,2,69,0],[80,3,69,1],[80,4,69,2],[80,5,69,3],[81,0,69,4],[81,3]],"functionMap":{"names":["<global>","create$argument_0","setRedirectAfterLogin","login","register","logout","loadToken"],"mappings":"AAA;8CCiB;yBCO;GDE;SEE;GFQ;YGE;GHQ;UIE;GJG;aKE;GLc;EDC"}},"type":"js/module"}]}